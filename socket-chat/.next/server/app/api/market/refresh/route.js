"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/market/refresh/route";
exports.ids = ["app/api/market/refresh/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmarket%2Frefresh%2Froute&page=%2Fapi%2Fmarket%2Frefresh%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmarket%2Frefresh%2Froute.js&appDir=D%3A%5Cprakash%5CNew%20folder%5CstockTree%20(1)%5Csocket-chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cprakash%5CNew%20folder%5CstockTree%20(1)%5Csocket-chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmarket%2Frefresh%2Froute&page=%2Fapi%2Fmarket%2Frefresh%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmarket%2Frefresh%2Froute.js&appDir=D%3A%5Cprakash%5CNew%20folder%5CstockTree%20(1)%5Csocket-chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cprakash%5CNew%20folder%5CstockTree%20(1)%5Csocket-chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_prakash_New_folder_stockTree_1_socket_chat_app_api_market_refresh_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/market/refresh/route.js */ \"(rsc)/./app/api/market/refresh/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/market/refresh/route\",\n        pathname: \"/api/market/refresh\",\n        filename: \"route\",\n        bundlePath: \"app/api/market/refresh/route\"\n    },\n    resolvedPagePath: \"D:\\\\prakash\\\\New folder\\\\stockTree (1)\\\\socket-chat\\\\app\\\\api\\\\market\\\\refresh\\\\route.js\",\n    nextConfigOutput,\n    userland: D_prakash_New_folder_stockTree_1_socket_chat_app_api_market_refresh_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/market/refresh/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtYXJrZXQlMkZyZWZyZXNoJTJGcm91dGUmcGFnZT0lMkZhcGklMkZtYXJrZXQlMkZyZWZyZXNoJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbWFya2V0JTJGcmVmcmVzaCUyRnJvdXRlLmpzJmFwcERpcj1EJTNBJTVDcHJha2FzaCU1Q05ldyUyMGZvbGRlciU1Q3N0b2NrVHJlZSUyMCgxKSU1Q3NvY2tldC1jaGF0JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDcHJha2FzaCU1Q05ldyUyMGZvbGRlciU1Q3N0b2NrVHJlZSUyMCgxKSU1Q3NvY2tldC1jaGF0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QztBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2FuZ2VsYnJva2luZy1saXZlLWRhdGEtdmVyY2VsLz80OWVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXHByYWthc2hcXFxcTmV3IGZvbGRlclxcXFxzdG9ja1RyZWUgKDEpXFxcXHNvY2tldC1jaGF0XFxcXGFwcFxcXFxhcGlcXFxcbWFya2V0XFxcXHJlZnJlc2hcXFxccm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21hcmtldC9yZWZyZXNoL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWFya2V0L3JlZnJlc2hcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL21hcmtldC9yZWZyZXNoL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxccHJha2FzaFxcXFxOZXcgZm9sZGVyXFxcXHN0b2NrVHJlZSAoMSlcXFxcc29ja2V0LWNoYXRcXFxcYXBwXFxcXGFwaVxcXFxtYXJrZXRcXFxccmVmcmVzaFxcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbWFya2V0L3JlZnJlc2gvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmarket%2Frefresh%2Froute&page=%2Fapi%2Fmarket%2Frefresh%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmarket%2Frefresh%2Froute.js&appDir=D%3A%5Cprakash%5CNew%20folder%5CstockTree%20(1)%5Csocket-chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cprakash%5CNew%20folder%5CstockTree%20(1)%5Csocket-chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/market/refresh/route.js":
/*!*****************************************!*\
  !*** ./app/api/market/refresh/route.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/mongodb */ \"(rsc)/./lib/mongodb.js\");\n\n\n\n// Stock configuration\nconst STOCK_CONFIG = {\n    NSE: [\n        {\n            token: \"3045\",\n            symbol: \"SBIN\"\n        },\n        {\n            token: \"881\",\n            symbol: \"RELIANCE\"\n        },\n        {\n            token: \"99926004\",\n            symbol: \"INFY\"\n        },\n        {\n            token: \"2885\",\n            symbol: \"TCS\"\n        },\n        {\n            token: \"1333\",\n            symbol: \"HDFCBANK\"\n        },\n        {\n            token: \"17963\",\n            symbol: \"ITC\"\n        },\n        {\n            token: \"11536\",\n            symbol: \"LT\"\n        },\n        {\n            token: \"1660\",\n            symbol: \"KOTAKBANK\"\n        },\n        {\n            token: \"288\",\n            symbol: \"AXISBANK\"\n        },\n        {\n            token: \"5633\",\n            symbol: \"MARUTI\"\n        },\n        {\n            token: \"1594\",\n            symbol: \"ICICIBANK\"\n        },\n        {\n            token: \"10999\",\n            symbol: \"BHARTIARTL\"\n        },\n        {\n            token: \"526\",\n            symbol: \"BAJFINANCE\"\n        },\n        {\n            token: \"16675\",\n            symbol: \"ASIANPAINT\"\n        },\n        {\n            token: \"1330\",\n            symbol: \"HDFC\"\n        }\n    ],\n    NFO: [\n        {\n            token: \"58662\",\n            symbol: \"NIFTY_JUN_FUT\"\n        }\n    ]\n};\n// Mock market data for testing\nconst generateMockMarketData = ()=>{\n    const mockData = {};\n    // Generate mock NSE data\n    mockData.NSE = {};\n    STOCK_CONFIG.NSE.forEach((stock)=>{\n        const basePrice = Math.random() * 1000 + 100 // Random price between 100-1100\n        ;\n        const change = (Math.random() - 0.5) * 20 // Random change between -10 to +10\n        ;\n        mockData.NSE[stock.token] = {\n            ltp: Number.parseFloat((basePrice + change).toFixed(2)),\n            open: Number.parseFloat(basePrice.toFixed(2)),\n            high: Number.parseFloat((basePrice + Math.abs(change) + Math.random() * 10).toFixed(2)),\n            low: Number.parseFloat((basePrice - Math.abs(change) - Math.random() * 10).toFixed(2)),\n            close: Number.parseFloat(basePrice.toFixed(2)),\n            totalTradedVolume: Math.floor(Math.random() * 1000000),\n            avgPrice: Number.parseFloat((basePrice + change / 2).toFixed(2)),\n            upperCircuit: Number.parseFloat((basePrice * 1.1).toFixed(2)),\n            lowerCircuit: Number.parseFloat((basePrice * 0.9).toFixed(2))\n        };\n    });\n    // Generate mock NFO data\n    mockData.NFO = {};\n    STOCK_CONFIG.NFO.forEach((stock)=>{\n        const basePrice = Math.random() * 500 + 50;\n        const change = (Math.random() - 0.5) * 10;\n        mockData.NFO[stock.token] = {\n            ltp: Number.parseFloat((basePrice + change).toFixed(2)),\n            open: Number.parseFloat(basePrice.toFixed(2)),\n            high: Number.parseFloat((basePrice + Math.abs(change) + Math.random() * 5).toFixed(2)),\n            low: Number.parseFloat((basePrice - Math.abs(change) - Math.random() * 5).toFixed(2)),\n            close: Number.parseFloat(basePrice.toFixed(2)),\n            totalTradedVolume: Math.floor(Math.random() * 100000),\n            avgPrice: Number.parseFloat((basePrice + change / 2).toFixed(2)),\n            upperCircuit: Number.parseFloat((basePrice * 1.1).toFixed(2)),\n            lowerCircuit: Number.parseFloat((basePrice * 0.9).toFixed(2))\n        };\n    });\n    return mockData;\n};\nconst getClientIP = (req)=>{\n    return req.headers.get(\"x-forwarded-for\") || req.headers.get(\"x-real-ip\") || \"127.0.0.1\";\n};\nasync function POST(req) {\n    try {\n        const { db } = await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__.connectToDatabase)();\n        // Get authentication tokens\n        const auth = await db.collection(\"auth\").findOne({\n            clientCode: \"RSIKA1012\",\n            isActive: true\n        });\n        if (!auth || !auth.jwtToken) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"No valid authentication tokens found. Please login first.\"\n            }, {\n                status: 401\n            });\n        }\n        // Check if using mock authentication\n        if (auth.isMock || process.env.USE_MOCK_AUTH === \"true\") {\n            console.log(\"\\uD83C\\uDFAD Using mock market data...\");\n            const mockMarketData = generateMockMarketData();\n            // Process and save mock data to MongoDB\n            const savePromises = [];\n            for (const [exchange, tokens] of Object.entries(mockMarketData)){\n                for (const [token, data] of Object.entries(tokens)){\n                    const stockInfo = [\n                        ...STOCK_CONFIG.NSE,\n                        ...STOCK_CONFIG.NFO\n                    ].find((s)=>s.token === token);\n                    const symbol = stockInfo ? stockInfo.symbol : `TOKEN_${token}`;\n                    const change = data.ltp - data.close;\n                    const changePercent = data.close ? change / data.close * 100 : 0;\n                    const marketDataDoc = {\n                        token: token,\n                        exchange: exchange,\n                        symbol: symbol,\n                        ltp: data.ltp,\n                        open: data.open,\n                        high: data.high,\n                        low: data.low,\n                        close: data.close,\n                        volume: data.totalTradedVolume,\n                        avgPrice: data.avgPrice,\n                        upperCircuit: data.upperCircuit,\n                        lowerCircuit: data.lowerCircuit,\n                        change: change,\n                        changePercent: changePercent,\n                        lastUpdated: new Date(),\n                        timestamp: new Date(),\n                        isMock: true\n                    };\n                    savePromises.push(db.collection(\"marketdata\").findOneAndUpdate({\n                        token: token,\n                        exchange: exchange\n                    }, {\n                        $set: marketDataDoc\n                    }, {\n                        upsert: true\n                    }));\n                }\n            }\n            await Promise.all(savePromises);\n            console.log(\"\\uD83C\\uDFAD Mock market data saved to MongoDB\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Mock market data refreshed successfully\",\n                data: mockMarketData,\n                timestamp: new Date(),\n                isMock: true\n            });\n        }\n        // Real market data fetching (existing code)\n        // Check if token is expired\n        if (auth.expiresAt && new Date() > new Date(auth.expiresAt)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Authentication token expired. Please login again.\"\n            }, {\n                status: 401\n            });\n        }\n        // Get client IP\n        const clientIP = getClientIP(req);\n        const publicIP = req.headers.get(\"x-real-ip\") || clientIP;\n        // Prepare quote data exactly as specified\n        const quoteData = JSON.stringify({\n            mode: \"FULL\",\n            exchangeTokens: {\n                NSE: STOCK_CONFIG.NSE.map((stock)=>stock.token),\n                NFO: STOCK_CONFIG.NFO.map((stock)=>stock.token)\n            }\n        });\n        const quoteConfig = {\n            method: \"post\",\n            url: \"https://apiconnect.angelone.in/rest/secure/angelbroking/market/v1/quote/\",\n            headers: {\n                \"X-PrivateKey\": \"a2syiZnn\",\n                Accept: \"application/json\",\n                \"X-SourceID\": \"WEB\",\n                \"X-ClientLocalIP\": clientIP,\n                \"X-ClientPublicIP\": publicIP,\n                \"X-MACAddress\": \"00:0a:95:9d:68:16\",\n                \"X-UserType\": \"USER\",\n                Authorization: `Bearer ${auth.jwtToken}`,\n                \"Content-Type\": \"application/json\"\n            },\n            data: quoteData\n        };\n        console.log(\"\\uD83D\\uDCE1 Fetching market data...\");\n        const response = await (0,axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(quoteConfig);\n        const marketData = response.data.data;\n        // Process and save data to MongoDB\n        const savePromises = [];\n        for (const [exchange, tokens] of Object.entries(marketData)){\n            for (const [token, data] of Object.entries(tokens)){\n                const stockInfo = [\n                    ...STOCK_CONFIG.NSE,\n                    ...STOCK_CONFIG.NFO\n                ].find((s)=>s.token === token);\n                const symbol = stockInfo ? stockInfo.symbol : `TOKEN_${token}`;\n                const change = data.ltp - data.close;\n                const changePercent = data.close ? change / data.close * 100 : 0;\n                const marketDataDoc = {\n                    token: token,\n                    exchange: exchange,\n                    symbol: symbol,\n                    ltp: data.ltp,\n                    open: data.open,\n                    high: data.high,\n                    low: data.low,\n                    close: data.close,\n                    volume: data.totalTradedVolume,\n                    avgPrice: data.avgPrice,\n                    upperCircuit: data.upperCircuit,\n                    lowerCircuit: data.lowerCircuit,\n                    change: change,\n                    changePercent: changePercent,\n                    lastUpdated: new Date(),\n                    timestamp: new Date(),\n                    isMock: false\n                };\n                savePromises.push(db.collection(\"marketdata\").findOneAndUpdate({\n                    token: token,\n                    exchange: exchange\n                }, {\n                    $set: marketDataDoc\n                }, {\n                    upsert: true\n                }));\n            }\n        }\n        await Promise.all(savePromises);\n        console.log(\"\\uD83D\\uDCBE Market data saved to MongoDB\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Market data refreshed successfully\",\n            data: marketData,\n            timestamp: new Date()\n        });\n    } catch (error) {\n        console.error(\"❌ Failed to fetch market data:\", error.response?.data || error.message);\n        if (error.response?.status === 401) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Authentication failed. Please login again.\"\n            }, {\n                status: 401\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: error.response?.data?.message || error.message\n            }, {\n                status: 500\n            });\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTztZQUNULEdBQ0E7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQixPQUFPO1lBQ0wsT0FBT2hELHFEQUFZQSxDQUFDNkMsSUFBSSxDQUN0QjtnQkFDRUMsU0FBUztnQkFDVEMsT0FBT0EsTUFBTTRDLFFBQVEsRUFBRWhDLE1BQU1nQixXQUFXNUIsTUFBTTRCLE9BQU87WUFDdkQsR0FDQTtnQkFBRTNCLFFBQVE7WUFBSTtRQUVsQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmdlbGJyb2tpbmctbGl2ZS1kYXRhLXZlcmNlbC8uL2FwcC9hcGkvbWFya2V0L3JlZnJlc2gvcm91dGUuanM/YWFiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiXG5pbXBvcnQgeyBjb25uZWN0VG9EYXRhYmFzZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9saWIvbW9uZ29kYlwiXG5cbi8vIFN0b2NrIGNvbmZpZ3VyYXRpb25cbmNvbnN0IFNUT0NLX0NPTkZJRyA9IHtcbiAgTlNFOiBbXG4gICAgeyB0b2tlbjogXCIzMDQ1XCIsIHN5bWJvbDogXCJTQklOXCIgfSxcbiAgICB7IHRva2VuOiBcIjg4MVwiLCBzeW1ib2w6IFwiUkVMSUFOQ0VcIiB9LFxuICAgIHsgdG9rZW46IFwiOTk5MjYwMDRcIiwgc3ltYm9sOiBcIklORllcIiB9LFxuICAgIHsgdG9rZW46IFwiMjg4NVwiLCBzeW1ib2w6IFwiVENTXCIgfSxcbiAgICB7IHRva2VuOiBcIjEzMzNcIiwgc3ltYm9sOiBcIkhERkNCQU5LXCIgfSxcbiAgICB7IHRva2VuOiBcIjE3OTYzXCIsIHN5bWJvbDogXCJJVENcIiB9LFxuICAgIHsgdG9rZW46IFwiMTE1MzZcIiwgc3ltYm9sOiBcIkxUXCIgfSxcbiAgICB7IHRva2VuOiBcIjE2NjBcIiwgc3ltYm9sOiBcIktPVEFLQkFOS1wiIH0sXG4gICAgeyB0b2tlbjogXCIyODhcIiwgc3ltYm9sOiBcIkFYSVNCQU5LXCIgfSxcbiAgICB7IHRva2VuOiBcIjU2MzNcIiwgc3ltYm9sOiBcIk1BUlVUSVwiIH0sXG4gICAgeyB0b2tlbjogXCIxNTk0XCIsIHN5bWJvbDogXCJJQ0lDSUJBTktcIiB9LFxuICAgIHsgdG9rZW46IFwiMTA5OTlcIiwgc3ltYm9sOiBcIkJIQVJUSUFSVExcIiB9LFxuICAgIHsgdG9rZW46IFwiNTI2XCIsIHN5bWJvbDogXCJCQUpGSU5BTkNFXCIgfSxcbiAgICB7IHRva2VuOiBcIjE2Njc1XCIsIHN5bWJvbDogXCJBU0lBTlBBSU5UXCIgfSxcbiAgICB7IHRva2VuOiBcIjEzMzBcIiwgc3ltYm9sOiBcIkhERkNcIiB9LFxuICBdLFxuICBORk86IFt7IHRva2VuOiBcIjU4NjYyXCIsIHN5bWJvbDogXCJOSUZUWV9KVU5fRlVUXCIgfV0sXG59XG5cbi8vIE1vY2sgbWFya2V0IGRhdGEgZm9yIHRlc3RpbmdcbmNvbnN0IGdlbmVyYXRlTW9ja01hcmtldERhdGEgPSAoKSA9PiB7XG4gIGNvbnN0IG1vY2tEYXRhID0ge31cblxuICAvLyBHZW5lcmF0ZSBtb2NrIE5TRSBkYXRhXG4gIG1vY2tEYXRhLk5TRSA9IHt9XG4gIFNUT0NLX0NPTkZJRy5OU0UuZm9yRWFjaCgoc3RvY2spID0+IHtcbiAgICBjb25zdCBiYXNlUHJpY2UgPSBNYXRoLnJhbmRvbSgpICogMTAwMCArIDEwMCAvLyBSYW5kb20gcHJpY2UgYmV0d2VlbiAxMDAtMTEwMFxuICAgIGNvbnN0IGNoYW5nZSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIwIC8vIFJhbmRvbSBjaGFuZ2UgYmV0d2VlbiAtMTAgdG8gKzEwXG5cbiAgICBtb2NrRGF0YS5OU0Vbc3RvY2sudG9rZW5dID0ge1xuICAgICAgbHRwOiBOdW1iZXIucGFyc2VGbG9hdCgoYmFzZVByaWNlICsgY2hhbmdlKS50b0ZpeGVkKDIpKSxcbiAgICAgIG9wZW46IE51bWJlci5wYXJzZUZsb2F0KGJhc2VQcmljZS50b0ZpeGVkKDIpKSxcbiAgICAgIGhpZ2g6IE51bWJlci5wYXJzZUZsb2F0KChiYXNlUHJpY2UgKyBNYXRoLmFicyhjaGFuZ2UpICsgTWF0aC5yYW5kb20oKSAqIDEwKS50b0ZpeGVkKDIpKSxcbiAgICAgIGxvdzogTnVtYmVyLnBhcnNlRmxvYXQoKGJhc2VQcmljZSAtIE1hdGguYWJzKGNoYW5nZSkgLSBNYXRoLnJhbmRvbSgpICogMTApLnRvRml4ZWQoMikpLFxuICAgICAgY2xvc2U6IE51bWJlci5wYXJzZUZsb2F0KGJhc2VQcmljZS50b0ZpeGVkKDIpKSxcbiAgICAgIHRvdGFsVHJhZGVkVm9sdW1lOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKSxcbiAgICAgIGF2Z1ByaWNlOiBOdW1iZXIucGFyc2VGbG9hdCgoYmFzZVByaWNlICsgY2hhbmdlIC8gMikudG9GaXhlZCgyKSksXG4gICAgICB1cHBlckNpcmN1aXQ6IE51bWJlci5wYXJzZUZsb2F0KChiYXNlUHJpY2UgKiAxLjEpLnRvRml4ZWQoMikpLFxuICAgICAgbG93ZXJDaXJjdWl0OiBOdW1iZXIucGFyc2VGbG9hdCgoYmFzZVByaWNlICogMC45KS50b0ZpeGVkKDIpKSxcbiAgICB9XG4gIH0pXG5cbiAgLy8gR2VuZXJhdGUgbW9jayBORk8gZGF0YVxuICBtb2NrRGF0YS5ORk8gPSB7fVxuICBTVE9DS19DT05GSUcuTkZPLmZvckVhY2goKHN0b2NrKSA9PiB7XG4gICAgY29uc3QgYmFzZVByaWNlID0gTWF0aC5yYW5kb20oKSAqIDUwMCArIDUwXG4gICAgY29uc3QgY2hhbmdlID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMTBcblxuICAgIG1vY2tEYXRhLk5GT1tzdG9jay50b2tlbl0gPSB7XG4gICAgICBsdHA6IE51bWJlci5wYXJzZUZsb2F0KChiYXNlUHJpY2UgKyBjaGFuZ2UpLnRvRml4ZWQoMikpLFxuICAgICAgb3BlbjogTnVtYmVyLnBhcnNlRmxvYXQoYmFzZVByaWNlLnRvRml4ZWQoMikpLFxuICAgICAgaGlnaDogTnVtYmVyLnBhcnNlRmxvYXQoKGJhc2VQcmljZSArIE1hdGguYWJzKGNoYW5nZSkgKyBNYXRoLnJhbmRvbSgpICogNSkudG9GaXhlZCgyKSksXG4gICAgICBsb3c6IE51bWJlci5wYXJzZUZsb2F0KChiYXNlUHJpY2UgLSBNYXRoLmFicyhjaGFuZ2UpIC0gTWF0aC5yYW5kb20oKSAqIDUpLnRvRml4ZWQoMikpLFxuICAgICAgY2xvc2U6IE51bWJlci5wYXJzZUZsb2F0KGJhc2VQcmljZS50b0ZpeGVkKDIpKSxcbiAgICAgIHRvdGFsVHJhZGVkVm9sdW1lOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApLFxuICAgICAgYXZnUHJpY2U6IE51bWJlci5wYXJzZUZsb2F0KChiYXNlUHJpY2UgKyBjaGFuZ2UgLyAyKS50b0ZpeGVkKDIpKSxcbiAgICAgIHVwcGVyQ2lyY3VpdDogTnVtYmVyLnBhcnNlRmxvYXQoKGJhc2VQcmljZSAqIDEuMSkudG9GaXhlZCgyKSksXG4gICAgICBsb3dlckNpcmN1aXQ6IE51bWJlci5wYXJzZUZsb2F0KChiYXNlUHJpY2UgKiAwLjkpLnRvRml4ZWQoMikpLFxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gbW9ja0RhdGFcbn1cblxuY29uc3QgZ2V0Q2xpZW50SVAgPSAocmVxKSA9PiB7XG4gIHJldHVybiByZXEuaGVhZGVycy5nZXQoXCJ4LWZvcndhcmRlZC1mb3JcIikgfHwgcmVxLmhlYWRlcnMuZ2V0KFwieC1yZWFsLWlwXCIpIHx8IFwiMTI3LjAuMC4xXCJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYiB9ID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKVxuXG4gICAgLy8gR2V0IGF1dGhlbnRpY2F0aW9uIHRva2Vuc1xuICAgIGNvbnN0IGF1dGggPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiYXV0aFwiKS5maW5kT25lKHtcbiAgICAgIGNsaWVudENvZGU6IHByb2Nlc3MuZW52LkNMSUVOVF9DT0RFLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgfSlcblxuICAgIGlmICghYXV0aCB8fCAhYXV0aC5qd3RUb2tlbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IFwiTm8gdmFsaWQgYXV0aGVudGljYXRpb24gdG9rZW5zIGZvdW5kLiBQbGVhc2UgbG9naW4gZmlyc3QuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfSxcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2luZyBtb2NrIGF1dGhlbnRpY2F0aW9uXG4gICAgaWYgKGF1dGguaXNNb2NrIHx8IHByb2Nlc3MuZW52LlVTRV9NT0NLX0FVVEggPT09IFwidHJ1ZVwiKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCfjq0gVXNpbmcgbW9jayBtYXJrZXQgZGF0YS4uLlwiKVxuXG4gICAgICBjb25zdCBtb2NrTWFya2V0RGF0YSA9IGdlbmVyYXRlTW9ja01hcmtldERhdGEoKVxuXG4gICAgICAvLyBQcm9jZXNzIGFuZCBzYXZlIG1vY2sgZGF0YSB0byBNb25nb0RCXG4gICAgICBjb25zdCBzYXZlUHJvbWlzZXMgPSBbXVxuXG4gICAgICBmb3IgKGNvbnN0IFtleGNoYW5nZSwgdG9rZW5zXSBvZiBPYmplY3QuZW50cmllcyhtb2NrTWFya2V0RGF0YSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBbdG9rZW4sIGRhdGFdIG9mIE9iamVjdC5lbnRyaWVzKHRva2VucykpIHtcbiAgICAgICAgICBjb25zdCBzdG9ja0luZm8gPSBbLi4uU1RPQ0tfQ09ORklHLk5TRSwgLi4uU1RPQ0tfQ09ORklHLk5GT10uZmluZCgocykgPT4gcy50b2tlbiA9PT0gdG9rZW4pXG4gICAgICAgICAgY29uc3Qgc3ltYm9sID0gc3RvY2tJbmZvID8gc3RvY2tJbmZvLnN5bWJvbCA6IGBUT0tFTl8ke3Rva2VufWBcblxuICAgICAgICAgIGNvbnN0IGNoYW5nZSA9IGRhdGEubHRwIC0gZGF0YS5jbG9zZVxuICAgICAgICAgIGNvbnN0IGNoYW5nZVBlcmNlbnQgPSBkYXRhLmNsb3NlID8gKGNoYW5nZSAvIGRhdGEuY2xvc2UpICogMTAwIDogMFxuXG4gICAgICAgICAgY29uc3QgbWFya2V0RGF0YURvYyA9IHtcbiAgICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgICAgIGV4Y2hhbmdlOiBleGNoYW5nZSxcbiAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICAgICAgbHRwOiBkYXRhLmx0cCxcbiAgICAgICAgICAgIG9wZW46IGRhdGEub3BlbixcbiAgICAgICAgICAgIGhpZ2g6IGRhdGEuaGlnaCxcbiAgICAgICAgICAgIGxvdzogZGF0YS5sb3csXG4gICAgICAgICAgICBjbG9zZTogZGF0YS5jbG9zZSxcbiAgICAgICAgICAgIHZvbHVtZTogZGF0YS50b3RhbFRyYWRlZFZvbHVtZSxcbiAgICAgICAgICAgIGF2Z1ByaWNlOiBkYXRhLmF2Z1ByaWNlLFxuICAgICAgICAgICAgdXBwZXJDaXJjdWl0OiBkYXRhLnVwcGVyQ2lyY3VpdCxcbiAgICAgICAgICAgIGxvd2VyQ2lyY3VpdDogZGF0YS5sb3dlckNpcmN1aXQsXG4gICAgICAgICAgICBjaGFuZ2U6IGNoYW5nZSxcbiAgICAgICAgICAgIGNoYW5nZVBlcmNlbnQ6IGNoYW5nZVBlcmNlbnQsXG4gICAgICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIGlzTW9jazogdHJ1ZSxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzYXZlUHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgIGRiXG4gICAgICAgICAgICAgIC5jb2xsZWN0aW9uKFwibWFya2V0ZGF0YVwiKVxuICAgICAgICAgICAgICAuZmluZE9uZUFuZFVwZGF0ZSh7IHRva2VuOiB0b2tlbiwgZXhjaGFuZ2U6IGV4Y2hhbmdlIH0sIHsgJHNldDogbWFya2V0RGF0YURvYyB9LCB7IHVwc2VydDogdHJ1ZSB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoc2F2ZVByb21pc2VzKVxuICAgICAgY29uc29sZS5sb2coXCLwn46tIE1vY2sgbWFya2V0IGRhdGEgc2F2ZWQgdG8gTW9uZ29EQlwiKVxuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBcIk1vY2sgbWFya2V0IGRhdGEgcmVmcmVzaGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICBkYXRhOiBtb2NrTWFya2V0RGF0YSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBpc01vY2s6IHRydWUsXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIFJlYWwgbWFya2V0IGRhdGEgZmV0Y2hpbmcgKGV4aXN0aW5nIGNvZGUpXG4gICAgLy8gQ2hlY2sgaWYgdG9rZW4gaXMgZXhwaXJlZFxuICAgIGlmIChhdXRoLmV4cGlyZXNBdCAmJiBuZXcgRGF0ZSgpID4gbmV3IERhdGUoYXV0aC5leHBpcmVzQXQpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogXCJBdXRoZW50aWNhdGlvbiB0b2tlbiBleHBpcmVkLiBQbGVhc2UgbG9naW4gYWdhaW4uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfSxcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBHZXQgY2xpZW50IElQXG4gICAgY29uc3QgY2xpZW50SVAgPSBnZXRDbGllbnRJUChyZXEpXG4gICAgY29uc3QgcHVibGljSVAgPSByZXEuaGVhZGVycy5nZXQoXCJ4LXJlYWwtaXBcIikgfHwgY2xpZW50SVBcblxuICAgIC8vIFByZXBhcmUgcXVvdGUgZGF0YSBleGFjdGx5IGFzIHNwZWNpZmllZFxuICAgIGNvbnN0IHF1b3RlRGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIG1vZGU6IFwiRlVMTFwiLFxuICAgICAgZXhjaGFuZ2VUb2tlbnM6IHtcbiAgICAgICAgTlNFOiBTVE9DS19DT05GSUcuTlNFLm1hcCgoc3RvY2spID0+IHN0b2NrLnRva2VuKSxcbiAgICAgICAgTkZPOiBTVE9DS19DT05GSUcuTkZPLm1hcCgoc3RvY2spID0+IHN0b2NrLnRva2VuKSxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIGNvbnN0IHF1b3RlQ29uZmlnID0ge1xuICAgICAgbWV0aG9kOiBcInBvc3RcIixcbiAgICAgIHVybDogXCJodHRwczovL2FwaWNvbm5lY3QuYW5nZWxvbmUuaW4vcmVzdC9zZWN1cmUvYW5nZWxicm9raW5nL21hcmtldC92MS9xdW90ZS9cIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJYLVByaXZhdGVLZXlcIjogcHJvY2Vzcy5lbnYuU01BUlRBUElfS0VZLFxuICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIlgtU291cmNlSURcIjogXCJXRUJcIixcbiAgICAgICAgXCJYLUNsaWVudExvY2FsSVBcIjogY2xpZW50SVAsXG4gICAgICAgIFwiWC1DbGllbnRQdWJsaWNJUFwiOiBwdWJsaWNJUCxcbiAgICAgICAgXCJYLU1BQ0FkZHJlc3NcIjogXCIwMDowYTo5NTo5ZDo2ODoxNlwiLFxuICAgICAgICBcIlgtVXNlclR5cGVcIjogXCJVU0VSXCIsXG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthdXRoLmp3dFRva2VufWAsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGRhdGE6IHF1b3RlRGF0YSxcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIvCfk6EgRmV0Y2hpbmcgbWFya2V0IGRhdGEuLi5cIilcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zKHF1b3RlQ29uZmlnKVxuICAgIGNvbnN0IG1hcmtldERhdGEgPSByZXNwb25zZS5kYXRhLmRhdGFcblxuICAgIC8vIFByb2Nlc3MgYW5kIHNhdmUgZGF0YSB0byBNb25nb0RCXG4gICAgY29uc3Qgc2F2ZVByb21pc2VzID0gW11cblxuICAgIGZvciAoY29uc3QgW2V4Y2hhbmdlLCB0b2tlbnNdIG9mIE9iamVjdC5lbnRyaWVzKG1hcmtldERhdGEpKSB7XG4gICAgICBmb3IgKGNvbnN0IFt0b2tlbiwgZGF0YV0gb2YgT2JqZWN0LmVudHJpZXModG9rZW5zKSkge1xuICAgICAgICBjb25zdCBzdG9ja0luZm8gPSBbLi4uU1RPQ0tfQ09ORklHLk5TRSwgLi4uU1RPQ0tfQ09ORklHLk5GT10uZmluZCgocykgPT4gcy50b2tlbiA9PT0gdG9rZW4pXG4gICAgICAgIGNvbnN0IHN5bWJvbCA9IHN0b2NrSW5mbyA/IHN0b2NrSW5mby5zeW1ib2wgOiBgVE9LRU5fJHt0b2tlbn1gXG5cbiAgICAgICAgY29uc3QgY2hhbmdlID0gZGF0YS5sdHAgLSBkYXRhLmNsb3NlXG4gICAgICAgIGNvbnN0IGNoYW5nZVBlcmNlbnQgPSBkYXRhLmNsb3NlID8gKGNoYW5nZSAvIGRhdGEuY2xvc2UpICogMTAwIDogMFxuXG4gICAgICAgIGNvbnN0IG1hcmtldERhdGFEb2MgPSB7XG4gICAgICAgICAgdG9rZW46IHRva2VuLFxuICAgICAgICAgIGV4Y2hhbmdlOiBleGNoYW5nZSxcbiAgICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgICBsdHA6IGRhdGEubHRwLFxuICAgICAgICAgIG9wZW46IGRhdGEub3BlbixcbiAgICAgICAgICBoaWdoOiBkYXRhLmhpZ2gsXG4gICAgICAgICAgbG93OiBkYXRhLmxvdyxcbiAgICAgICAgICBjbG9zZTogZGF0YS5jbG9zZSxcbiAgICAgICAgICB2b2x1bWU6IGRhdGEudG90YWxUcmFkZWRWb2x1bWUsXG4gICAgICAgICAgYXZnUHJpY2U6IGRhdGEuYXZnUHJpY2UsXG4gICAgICAgICAgdXBwZXJDaXJjdWl0OiBkYXRhLnVwcGVyQ2lyY3VpdCxcbiAgICAgICAgICBsb3dlckNpcmN1aXQ6IGRhdGEubG93ZXJDaXJjdWl0LFxuICAgICAgICAgIGNoYW5nZTogY2hhbmdlLFxuICAgICAgICAgIGNoYW5nZVBlcmNlbnQ6IGNoYW5nZVBlcmNlbnQsXG4gICAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGlzTW9jazogZmFsc2UsXG4gICAgICAgIH1cblxuICAgICAgICBzYXZlUHJvbWlzZXMucHVzaChcbiAgICAgICAgICBkYlxuICAgICAgICAgICAgLmNvbGxlY3Rpb24oXCJtYXJrZXRkYXRhXCIpXG4gICAgICAgICAgICAuZmluZE9uZUFuZFVwZGF0ZSh7IHRva2VuOiB0b2tlbiwgZXhjaGFuZ2U6IGV4Y2hhbmdlIH0sIHsgJHNldDogbWFya2V0RGF0YURvYyB9LCB7IHVwc2VydDogdHJ1ZSB9KSxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IFByb21pc2UuYWxsKHNhdmVQcm9taXNlcylcbiAgICBjb25zb2xlLmxvZyhcIvCfkr4gTWFya2V0IGRhdGEgc2F2ZWQgdG8gTW9uZ29EQlwiKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBcIk1hcmtldCBkYXRhIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgIGRhdGE6IG1hcmtldERhdGEsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEZhaWxlZCB0byBmZXRjaCBtYXJrZXQgZGF0YTpcIiwgZXJyb3IucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3IubWVzc2FnZSlcblxuICAgIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIGxvZ2luIGFnYWluLlwiLFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH0sXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlLFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH0sXG4gICAgICApXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYXhpb3MiLCJjb25uZWN0VG9EYXRhYmFzZSIsIlNUT0NLX0NPTkZJRyIsIk5TRSIsInRva2VuIiwic3ltYm9sIiwiTkZPIiwiZ2VuZXJhdGVNb2NrTWFya2V0RGF0YSIsIm1vY2tEYXRhIiwiZm9yRWFjaCIsInN0b2NrIiwiYmFzZVByaWNlIiwiTWF0aCIsInJhbmRvbSIsImNoYW5nZSIsImx0cCIsIk51bWJlciIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwib3BlbiIsImhpZ2giLCJhYnMiLCJsb3ciLCJjbG9zZSIsInRvdGFsVHJhZGVkVm9sdW1lIiwiZmxvb3IiLCJhdmdQcmljZSIsInVwcGVyQ2lyY3VpdCIsImxvd2VyQ2lyY3VpdCIsImdldENsaWVudElQIiwicmVxIiwiaGVhZGVycyIsImdldCIsIlBPU1QiLCJkYiIsImF1dGgiLCJjb2xsZWN0aW9uIiwiZmluZE9uZSIsImNsaWVudENvZGUiLCJwcm9jZXNzIiwiZW52IiwiQ0xJRU5UX0NPREUiLCJpc0FjdGl2ZSIsImp3dFRva2VuIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsImlzTW9jayIsIlVTRV9NT0NLX0FVVEgiLCJjb25zb2xlIiwibG9nIiwibW9ja01hcmtldERhdGEiLCJzYXZlUHJvbWlzZXMiLCJleGNoYW5nZSIsInRva2VucyIsIk9iamVjdCIsImVudHJpZXMiLCJkYXRhIiwic3RvY2tJbmZvIiwiZmluZCIsInMiLCJjaGFuZ2VQZXJjZW50IiwibWFya2V0RGF0YURvYyIsInZvbHVtZSIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsInRpbWVzdGFtcCIsInB1c2giLCJmaW5kT25lQW5kVXBkYXRlIiwiJHNldCIsInVwc2VydCIsIlByb21pc2UiLCJhbGwiLCJtZXNzYWdlIiwiZXhwaXJlc0F0IiwiY2xpZW50SVAiLCJwdWJsaWNJUCIsInF1b3RlRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlIiwiZXhjaGFuZ2VUb2tlbnMiLCJtYXAiLCJxdW90ZUNvbmZpZyIsIm1ldGhvZCIsInVybCIsIlNNQVJUQVBJX0tFWSIsIkFjY2VwdCIsIkF1dGhvcml6YXRpb24iLCJyZXNwb25zZSIsIm1hcmtldERhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/market/refresh/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst uri = \"mongodb+srv://ankitchouhan7987:Y4blB8pgLqk5Qhlh@cluster0.4xqqdan.mongodb.net/authApi\";\nconst options = {\n    useUnifiedTopology: true,\n    useNewUrlParser: true\n};\nlet client;\nlet clientPromise;\nif (false) {}\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect();\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\nasync function connectToDatabase() {\n    const client = await clientPromise;\n    const db = client.db(\"angelbroking\");\n    return {\n        client,\n        db\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFDO0FBRXJDLE1BQU1DLE1BQU1DLHNGQUF1QjtBQUNuQyxNQUFNRyxVQUFVO0lBQ2RDLG9CQUFvQjtJQUNwQkMsaUJBQWlCO0FBQ25CO0FBRUEsSUFBSUM7QUFDSixJQUFJQztBQUVKLElBQUksS0FBd0IsRUFBRSxFQUU3QjtBQUVELElBQUlQLElBQXNDLEVBQUU7SUFDMUMsK0RBQStEO0lBQy9ELDZFQUE2RTtJQUM3RSxJQUFJLENBQUNTLE9BQU9DLG1CQUFtQixFQUFFO1FBQy9CSixTQUFTLElBQUlSLGdEQUFXQSxDQUFDQyxLQUFLSTtRQUM5Qk0sT0FBT0MsbUJBQW1CLEdBQUdKLE9BQU9LLE9BQU87SUFDN0M7SUFDQUosZ0JBQWdCRSxPQUFPQyxtQkFBbUI7QUFDNUMsT0FBTyxFQUlOO0FBRU0sZUFBZUU7SUFDcEIsTUFBTU4sU0FBUyxNQUFNQztJQUNyQixNQUFNTSxLQUFLUCxPQUFPTyxFQUFFLENBQUM7SUFDckIsT0FBTztRQUFFUDtRQUFRTztJQUFHO0FBQ3RCO0FBRUEsaUVBQWVOLGFBQWFBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmdlbGJyb2tpbmctbGl2ZS1kYXRhLXZlcmNlbC8uL2xpYi9tb25nb2RiLmpzP2Q5MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tIFwibW9uZ29kYlwiXG5cbmNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJXG5jb25zdCBvcHRpb25zID0ge1xuICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG4gIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbn1cblxubGV0IGNsaWVudFxubGV0IGNsaWVudFByb21pc2VcblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgYWRkIHlvdXIgTW9uZ28gVVJJIHRvIC5lbnYubG9jYWxcIilcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIpIHtcbiAgLy8gSW4gZGV2ZWxvcG1lbnQgbW9kZSwgdXNlIGEgZ2xvYmFsIHZhcmlhYmxlIHNvIHRoYXQgdGhlIHZhbHVlXG4gIC8vIGlzIHByZXNlcnZlZCBhY3Jvc3MgbW9kdWxlIHJlbG9hZHMgY2F1c2VkIGJ5IEhNUiAoSG90IE1vZHVsZSBSZXBsYWNlbWVudCkuXG4gIGlmICghZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UpIHtcbiAgICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKVxuICAgIGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKVxuICB9XG4gIGNsaWVudFByb21pc2UgPSBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZVxufSBlbHNlIHtcbiAgLy8gSW4gcHJvZHVjdGlvbiBtb2RlLCBpdCdzIGJlc3QgdG8gbm90IHVzZSBhIGdsb2JhbCB2YXJpYWJsZS5cbiAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucylcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RUb0RhdGFiYXNlKCkge1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlXG4gIGNvbnN0IGRiID0gY2xpZW50LmRiKFwiYW5nZWxicm9raW5nXCIpXG4gIHJldHVybiB7IGNsaWVudCwgZGIgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGllbnRQcm9taXNlXG4iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJ1cmkiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJvcHRpb25zIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidXNlTmV3VXJsUGFyc2VyIiwiY2xpZW50IiwiY2xpZW50UHJvbWlzZSIsIkVycm9yIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNvbm5lY3QiLCJjb25uZWN0VG9EYXRhYmFzZSIsImRiIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/axios","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/call-bind-apply-helpers","vendor-chunks/debug","vendor-chunks/get-proto","vendor-chunks/mime-db","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/supports-color","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/has-flag","vendor-chunks/get-intrinsic","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmarket%2Frefresh%2Froute&page=%2Fapi%2Fmarket%2Frefresh%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmarket%2Frefresh%2Froute.js&appDir=D%3A%5Cprakash%5CNew%20folder%5CstockTree%20(1)%5Csocket-chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cprakash%5CNew%20folder%5CstockTree%20(1)%5Csocket-chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();